{# maintenance.html.twig #}

{% extends 'base.html.twig' %}

{% block page %}
    <div id='acces_refuse' style='font-weight:normal;'>
      {% if toAdd is empty and toDelete is empty  %}
        <h1>Votre version de PlanningBiblio est à jour !</h1>
        <a href="{{ asset('/index') }}"> Retour </a>
      {% else %}
        <h1>Veuillez mettre à jour votre base de données pour utiliser PlanningBiblio</h1>
        <br/>
        {% if not toDelete is empty %}
          <h3 style='text-align:left;'>Voici la liste des migrations incompatibles avec votre version de PlanningBiblio : </h3>
          <ul style='text-align:left;'>
            {% for version in toDelete %}
              <li> <b>{{ version.version }}</b></li>
            {% endfor %}
          </ul>
          <p style='text-align:left;'> Veuillez revenir à la version précédente, puis exécutez dans votre terminal la commande suivante avant de passer à cette version : <br/> <br/>
            <i>php bin/console doctrine:migrations:execute {% for a in toDelete %} '{{ a.version }}' {% endfor %} --down</i>
            <br/><br/>Pensez à copier cette ligne dans votre presse-papiers avant de quitter cette version de PlanningBiblio.
          </p>
        {% endif %}
        {% if not toAdd is empty %}
          <h3 style='text-align:left;'>Voici la liste des migrations disponibles à l'ajout :</h3>
          <ul style='text-align:left;'>
            {% for version in toAdd %}
              <li> <b>{{ version.version }}</b> </li>
            {% endfor %}
          </ul>
          <p style='text-align:left;'> Pour les intégrer, veuillez exécuter la commande suivante dans votre terminal :<i> php bin/console doctrine:migrations:migrate </i></p>
        {% endif %}
      {% endif %}
    </div>
{% endblock %}
