{# site/edit.html.twig #}

{% extends 'base.html.twig' %}

{% block specificjs %}
  <script type="text/javaScript"> 
    function add_mail(){
      for(i=0;i<50;i++){
        if(document.getElementById("tr_mail_"+i).style.display=="none"){
          document.getElementById("tr_mail_"+i).style.display="";
          return;
        }
      }
    }
  </script>
{% endblock %}
{% block page %}
  <div id="content-site">
    {% if id %}
      <h3>Modification du site</h3>
    {% else %}
      <h3>Ajout d'un site</h3>
    {% endif %}
    <div class="site">
      <form id='site_form' method='post' action="{{ asset('site') }}" name='form'>
        <input type='hidden' name='CSRFToken' value="{{ CSRFSession }}"/>
        {% if id is defined %}
            <input type='hidden' name='id' value='{{ id }}'/>
        {% else %}
            <input type='hidden' name='id' value=''/>
        {% endif %}
        <table style='width:100%'>
          <tr style='vertical-align:top;'>
            <td style='width:50%'>
              <table>
                <tr>
                  <td style='width:160px'>Nom du site :</td>
                  <td>
                    <input type='text' value='{{ site_name }}' name='nom' style='width:250px' class='ui-widget-content ui-corner-all' />
                  </td>
                </tr>
                <tr>
                  <td style='width:160px'>Mails :</td>
                </tr>
                {% set i = 1 %}
                {% for elem in mails %}
                  <tr id='tr_mail_{{i}}' >
                    <td>
                      <input type='text' value='{{ elem }}' name='mail_{{i}}' style='width:250px' class='ui-widget-content ui-corner-all' />
                    </td>
                  </tr>
                  {% set i = i + 1 %}
                {% endfor %}
                {% for j in 0..25 %}
                  <tr id='tr_mail_{{j}}' style='display:none;'>
                    <td>
                      <input type='text' value='' name='mail_{{i}}' style='width:250px' class='ui-widget-content ui-corner-all' />
                    </td>
                  </tr>
                  {% set i = i + 1 %}
                {% endfor %}
                <tr>
                  <td>
                    <span class='pl-icon pl-icon-add' title='Ajouter' style='cursor:pointer' onclick="add_mail()"></span>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td colspan='2' style='text-align:center;'><br/><br/>
              <input type='hidden' value={{id}} name='id'/>
              <a href='{{ asset("site") }}'class='ui-button ui-button-type2'>Annuler</a>
                  &nbsp;&nbsp;&nbsp;
              <input type='submit' value='Valider' class='ui-button'/>
            </td>
          </tr>
        </table>
      </form>
    </div>
  </div>
{% endblock %}
